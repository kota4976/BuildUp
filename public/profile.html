<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« - Alex Johnson</title>
    <link rel="stylesheet" href="styles/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <!-- 1. HTMLã®<body>å†…ã§ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’å‘¼ã³å‡ºã™ -->
    <build-up-header></build-up-header>

    <!-- 2. <body>ã®æœ€å¾Œã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦JSã‚’èª­ã¿è¾¼ã‚€ -->
    <script src="component/header-component.js" type="module"></script>

    <div class="main-content">

        <div class="profile-card">
            <img src="images/profile_placeholder.jpg" alt="Alex Johnsonã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ" class="profile-img">
            <div class="profile-info">
                <h1>Alex Johnson</h1>
                <p>Full Stack Developer & Product Designer</p>
                <span>ğŸ“ San Francisco, CA</span>
            </div>
            <button class="edit-btn">âœï¸ Edit Profile</button>
        </div>

        <div class="tabs">
            <a href="#" class="active">Overview</a>
            <a href="#">Projects</a>
            <a href="#">Skills</a>
            <a href="#">Achievements</a>
        </div>

        <div class="profile-layout">

            <div class="left-column">

                <div id="overview-content" class="tab-content active">
                    <div class="section-card about-section">
                        <h3>About</h3>
                        <p>Passionate about creating innovative solutions that make a positive impact. I love collaborating with diverse teams to bring ideas to life.</p>
                    </div>
                </div>

                <div id="projects-content" class="tab-content hidden">
                    <div class="project-list">

                        <div class="project-card-item">
                            <img src="images/project_thumb_ai.jpg" alt="AI Platform Thumbnail" class="project-thumbnail">
                            <div class="project-details">
                                <h4>AI-Powered Learning Platform</h4>
                                <p>Lead Developer</p>
                                <span>ğŸ‘¤ 5 members</span>
                            </div>
                            <span class="project-status status-active">Active</span>
                        </div>

                        <div class="project-card-item">
                            <img src="images/project_thumb_garden.jpg" alt="Garden Network Thumbnail" class="project-thumbnail">
                            <div class="project-details">
                                <h4>Community Garden Network</h4>
                                <p>UI/UX Designer</p>
                                <span>ğŸ‘¤ 6 members</span>
                            </div>
                            <span class="project-status status-completed">Completed</span>
                        </div>

                    </div>
                </div>
                </div> <div class="right-column">
                <div class="section-card contact-info">
                    <h3>Contact Information</h3>
                    <div class="info-item"><i class="fa-solid fa-envelope"></i> alex.johnson@email.com</div>
                    <div class="info-item"><i class="fa-solid fa-globe"></i> <a href="#">alexjohnson.dev</a></div>
                    <div class="info-item"><i class="fa-brands fa-github"></i> <a href="#">/alexjohnson</a></div>
                    <div class="info-item"><strong>ğŸ’¼</strong> <a href="#">/alexjohnson</a></div>
                </div>

                <div class="section-card quick-stats">
                    <h3>Quick Stats</h3>
                    <div class="stat-item">Projects Joined<span class="stat-value">12</span></div>
                    <div class="stat-item">Projects Completed<span class="stat-value">8</span></div>
                    <div class="stat-item">Collaborations<span class="stat-value">45</span></div>
                    <div class="stat-item">Rating<span class="stat-value rating-stars">4.9 â­â­â­â­â­</span></div>
                </div>
            </div> </div> </div>

    <script src="scripts/tab_switcher.js" defer></script>


    <script>
        // --- APIå‘¼ã³å‡ºã—ã®è¨­å®š ---
        const API_BASE_URL = 'http://localhost:8080/api/v1';

        // â˜…é‡è¦â˜…: ã“ã“ã«ã€ã‚ãªãŸãŒå—ã‘å–ã£ãŸã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚
        const YOUR_ACCESS_TOKEN = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjMjk2N2RlZS02NGExLTQ1Y2ItODVkZC04NmUwZTFkZjk4N2UiLCJleHAiOjE3NjU1MTY3OTUsImlhdCI6MTc2MjkyNDc5NX0.Srb78VBFWaDKFIEfd_bDmsH0zzGbwMimIn3plso4vO0";

        // --- APIã‚’å‘¼ã³å‡ºã™é–¢æ•° ---
        async function fetchMyInfo() {

            const endpoint = `${API_BASE_URL}/auth/me`;
            console.log("ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ä¸­...", endpoint);

            try {
                const response = await fetch(endpoint, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${YOUR_ACCESS_TOKEN}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const userData = await response.json();
                    console.log("âœ… èªè¨¼æˆåŠŸï¼ ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±:", userData);

                    // --- å–å¾—ã—ãŸæƒ…å ±ã‚’HTMLã«åæ˜ ã•ã›ã‚‹ (profile.htmlå°‚ç”¨) ---
                    if (document.getElementById('profile-name')) {
                        document.getElementById('profile-name').textContent = userData.handle;
                    }
                    if (document.getElementById('profile-bio')) {
                        document.getElementById('profile-bio').textContent = userData.bio;
                    }
                    if (document.getElementById('profile-about-text')) {
                        document.getElementById('profile-about-text').textContent = userData.bio;
                    }
                    if (document.getElementById('contact-email')) {
                        document.getElementById('contact-email').textContent = `ğŸ“§ ${userData.email}`;
                    }
                    if (document.getElementById('contact-github')) {
                        document.getElementById('contact-github').textContent = `ğŸ™ ${userData.github_login}`;
                    }
                    if (document.getElementById('profile-avatar')) {
                        document.getElementById('profile-avatar').src = userData.avatar_url;
                    }

                } else {
                    const errorData = await response.json();
                    console.error(
                        `âŒ èªè¨¼å¤±æ•— (ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${response.status})`,
                        errorData
                    );
                }
            } catch (error) {
                console.error("ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", error);
            }
        }

        // --- é–¢æ•°ã®å®Ÿè¡Œ ---
        fetchMyInfo();
    </script>
</body>
</html>